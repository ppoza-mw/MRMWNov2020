[
{"className":"HeadingNode","align":"left","anchorId":"H_0F63BB2B","level":3,"children":[
{"className":"RichTextNode","text":"Normal Test "}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"The normal test of Probability of Default is based on the following observation:"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"Let "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi mathvariant=\"italic\">X</mi></mrow><mrow><mn>1</mn></mrow></msub></mrow></math>","displayStyle":false,"texString":"X_1"},
{"className":"RichTextNode","text":", "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi mathvariant=\"italic\">X</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>","displayStyle":false,"texString":"X_2"},
{"className":"RichTextNode","text":", "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi mathvariant=\"italic\">X</mi></mrow><mrow><mn>3</mn></mrow></msub></mrow></math>","displayStyle":false,"texString":"X_3"},
{"className":"RichTextNode","text":", etc. be independent random variables with means "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi>μ</mi></mrow><mrow><mn>1</mn></mrow></msub></mrow></math>","displayStyle":false,"texString":"\\mu_1"},
{"className":"RichTextNode","text":", "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi>μ</mi></mrow><mrow><mn>2</mn></mrow></msub></mrow></math>","displayStyle":false,"texString":"\\mu_2"},
{"className":"RichTextNode","text":", "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi>μ</mi></mrow><mrow><mn>3</mn></mrow></msub></mrow></math>","displayStyle":false,"texString":"\\mu_3"},
{"className":"RichTextNode","text":", etc. and common variance "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msup><mrow><mi>σ</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></math>","displayStyle":false,"texString":"\\sigma^2"},
{"className":"RichTextNode","text":" > 0, observed in years t = 1,2,...T, then by central limit theorem the distribution of the standardized sum "}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mrow><mrow><munderover><mrow><mo>∑</mo></mrow><mrow><mi mathvariant=\"italic\">t</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></munderover><mrow><mfrac><mrow><mrow><mo>(</mo><mrow><msub><mrow><mi mathvariant=\"italic\">X</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub><mo>-</mo><msub><mrow><mi>μ</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></mrow><mo>)</mo></mrow></mrow><mrow><msqrt><mrow><mi mathvariant=\"italic\">T</mi><mo>*</mo><msup><mrow><mi>σ</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></msqrt></mrow></mfrac></mrow></mrow></mrow></math>","displayStyle":true,"texString":"\\sum_{t=1}^T \\frac{\\left(X_t -\\mu_t \\right)}{\\sqrt{T*\\sigma^2 }}"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"will converge to normal distribution for T tending towards "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><mo>∞</mo></mrow></math>","displayStyle":false,"texString":"\\infty"},
{"className":"RichTextNode","text":"."}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"In order to apply the normal approximation to the case of Probability of Default forecasts "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>,</mo><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mn>2</mn></mrow></msub><mo>,</mo><msub><mrow><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></msub></mrow></math>","displayStyle":false,"texString":"{\\textrm{PD}}_1 ,{\\textrm{PD}}_2 ,{\\ldotp \\ldotp \\ldotp ,\\textrm{PD}}_T"},
{"className":"RichTextNode","text":" and observed percentage default rates "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mn>1</mn></mrow></msub><mo>,</mo><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mn>2</mn></mrow></msub><mo>,</mo><mo>.</mo><mo>.</mo><mo>.</mo><mo>,</mo><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></msub></mrow></math>","displayStyle":false,"texString":"d_1 ,d_2 ,\\ldotp \\ldotp \\ldotp ,d_T"},
{"className":"RichTextNode","text":" an estimator "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msup><mrow><mi>τ</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></math>","displayStyle":false,"texString":"\\tau^2"},
{"className":"RichTextNode","text":" for variance "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mrow><mi>σ</mi></mrow><mrow><mn>2</mn></mrow></msup></math>","displayStyle":false,"texString":"\\sigma^2"},
{"className":"RichTextNode","text":" must be specified. The obvious choice for "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mrow><mi>τ</mi></mrow><mrow><mn>2</mn></mrow></msup></math>","displayStyle":false,"texString":"\\tau^2"},
{"className":"RichTextNode","text":" is "}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mrow><msubsup><mrow><mi>τ</mi></mrow><mrow><mn>0</mn></mrow><mrow><mn>2</mn></mrow></msubsup><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi mathvariant=\"italic\">T</mi><mo>-</mo><mn>1</mn></mrow></mfrac><mtext> </mtext><mrow><munderover><mrow><mo>∑</mo></mrow><mrow><mi mathvariant=\"italic\">t</mi><mtext> </mtext><mo>=</mo><mn>1</mn></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></munderover><mrow><msup><mrow><mrow><mo>(</mo><mrow><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub><mo>-</mo><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></mrow><mo>)</mo></mrow></mrow><mrow><mn>2</mn></mrow></msup></mrow></mrow></mrow></math>","displayStyle":true,"texString":"\\tau_0^2 =\\frac{1}{T-1}\\;\\sum_{t\\;=1}^T {\\left(d_t -{\\mathrm{PD}}_t \\right)}^2"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":""}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"The estimator is unbiased when the forecast probability of default matches the observed probability of default. The estimator is upwardly biased as soon as some of the forecasts differ from the corresponding observed PDs. The bias can be reduced by choosing the following estimator. This estimator is also upwardly biased, but to a lesser extent than "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msubsup><mrow><mi>τ</mi></mrow><mrow><mn>0</mn></mrow><mrow><mn>2</mn></mrow></msubsup></math>","displayStyle":false,"texString":"\\tau_0^2"},
{"className":"RichTextNode","text":"."}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mrow><msup><mrow><mi>τ</mi></mrow><mrow><mn>2</mn></mrow></msup><mo>=</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi mathvariant=\"italic\">T</mi><mo>-</mo><mn>1</mn></mrow></mfrac><mtext> </mtext><mrow><mo>(</mo><mrow><mrow><munderover accent=\"false\" accentunder=\"false\"><mrow><mo>∑</mo></mrow><mrow><mi mathvariant=\"italic\">t</mi><mtext> </mtext><mo>=</mo><mn>1</mn></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></munderover><mrow><msup><mrow><mrow><mo>(</mo><mrow><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub><mo>-</mo><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></mrow><mo>)</mo></mrow></mrow><mrow><mn>2</mn></mrow></msup><mo>-</mo><mfrac><mrow><mn>1</mn></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></mfrac><mtext> </mtext><msup><mrow><mrow><mo>(</mo><mrow><mrow><munderover accent=\"false\" accentunder=\"false\"><mrow><mo>∑</mo></mrow><mrow><mi mathvariant=\"italic\">t</mi><mtext> </mtext><mo>=</mo><mn>1</mn><mtext> </mtext></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></munderover><mrow><mrow><mo>(</mo><mrow><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub><mo>-</mo><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></mrow><mo>)</mo></mrow></mrow></mrow></mrow><mo>)</mo></mrow></mrow><mrow><mn>2</mn></mrow></msup></mrow></mrow></mrow><mo>)</mo></mrow></mrow></math>","displayStyle":true,"texString":"\\tau^2 =\\frac{1}{T-1}\\;\\left(\\sum_{t\\;=1}^T {\\left(d_t -{\\textrm{PD}}_t \\right)}^2 -\\frac{1}{T}\\;{\\left(\\sum_{t\\;=1\\;}^T \\left(d_t -{\\textrm{PD}}_t \\right)\\right)}^2 \\right)"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"We start by preparing the data. We can choose to work with test / training data. "}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"dataset = "},
{"className":"LiveControlNode","text":"\"test\"","context":{"data":{"text":"dataset","items":[{"label":"\"train\"","value":"\"train\""},{"label":"\"test\"","value":"\"test\""}],"itemLabels":["train","test"],"value":"\"test\"","executionModel":"Section"},"type":"comboBox"},"startColumn":10,"endColumn":16},
{"className":"PlainTextNode","text":" ;  "}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":""}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"if strcmp(dataset, \"train\")"}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"    label = \"train\" ; data = trainData ;"}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"else"}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"    label = \"test\" ; data = testData ;"}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"end"}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":""}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"observed = groupsummary( data, \"ID\", \"max\", \"PD\" ) ; observed_pd = observed.max_PD ;"}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"forecast = groupsummary( data, \"ID\", \"mean\", \"PD\" ) ; forecast_pd = forecast.mean_PD ; "}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"The normal test of the hypothesis \"None of the true probabilities of default in the years t = 1,2,...,T is greater than its corresponding forecast probability of default\" is defined as:"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"Reject the hypothesis at confidence level "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><mi>α</mi></mrow></math>","displayStyle":false,"texString":"\\alpha"},
{"className":"RichTextNode","text":" if"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mrow><mfrac><mrow><mrow><munderover><mrow><mo>∑</mo></mrow><mrow><mi mathvariant=\"italic\">t</mi><mtext> </mtext><mo>=</mo><mtext> </mtext><mn>1</mn><mtext> </mtext></mrow><mrow><mi mathvariant=\"italic\">T</mi></mrow></munderover><mrow><mrow><mo>(</mo><mrow><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub><mo>-</mo><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></mrow><mo>)</mo></mrow></mrow></mrow></mrow><mrow><msqrt><mrow><mi mathvariant=\"italic\">T</mi><mo>*</mo><msup><mrow><mi>τ</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></msqrt></mrow></mfrac><mo>></mo><msub><mrow><mi mathvariant=\"italic\">Z</mi></mrow><mrow><mi>α</mi></mrow></msub></mrow></math>","displayStyle":true,"texString":"\\frac{\\sum_{t\\;=\\;1\\;}^T \\left(d_t -{\\textrm{PD}}_t \\right)}{\\sqrt{T*\\tau^2 }}>Z_{\\alpha }"},
{"className":"RichTextNode","text":"  "}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"RichTextNode","text":"where "}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><mi mathvariant=\"italic\">T</mi></mrow></math>","displayStyle":false,"texString":"T"},
{"className":"RichTextNode","text":" is the total time steps"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow><mi mathvariant=\"normal\">PD</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></math>","displayStyle":false,"texString":"{\\textrm{PD}}_t"},
{"className":"RichTextNode","text":" is the forecast of probability of default"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow><mi mathvariant=\"italic\">d</mi></mrow><mrow><mi mathvariant=\"italic\">t</mi></mrow></msub></math>","displayStyle":false,"texString":"d_t"},
{"className":"RichTextNode","text":" is the observed probability of default rates"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mrow><mi>τ</mi></mrow><mrow><mn>2</mn></mrow></msup></math>","displayStyle":false,"texString":"\\tau^2"},
{"className":"RichTextNode","text":" is the estimator of variance "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"inline\"><mrow><msup><mrow><mi>σ</mi></mrow><mrow><mn>2</mn></mrow></msup></mrow></math>","displayStyle":false,"texString":"\\sigma^2"}]},
{"className":"RichTextParagraphNode","align":"left","children":[
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow><mi mathvariant=\"italic\">Z</mi></mrow><mrow><mi>α</mi></mrow></msub></math>","displayStyle":false,"texString":"Z_{\\alpha }"},
{"className":"RichTextNode","text":" is the standard normal "},
{"className":"EquationNode","text":"","encoding":"mathml","mathmlString":"<math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>α</mi></math>","displayStyle":false,"texString":"\\alpha"},
{"className":"RichTextNode","text":"-quantile "}]},
{"className":"LineNode","children":[
{"className":"PlainTextNode","text":"[ hNormalTest, rejectValue ] = normalTest(observed_pd, forecast_pd)"}]},
{"className":"SectionBreak","children":[]},
{"className":"LineNode","children":[]},
{"className":"LineNode","children":[]}]
